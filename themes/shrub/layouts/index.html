{{ define "main" }}

<div class="row">
  <div class="col-lg-4 order-lg-2">
    <div class="front-page-header sloped" style="padding-bottom: 100px;">
      <div class="row pt-4 pb-4 pl-4 pr-4">
        <div class="col-md-7 col-12 mx-auto">

          <div id="front-page-header" class="mx-auto">
            <center id="default-header">
              <h1 class="shrub mb-2 mt-3 text-center"
                style="font-size: 5em; line-height: 0.5;"
              >
                SHRUB
              </h1>
              <p
              class="text-center mt-3 dosis-semi-bold"
                style="line-height: 1;"
              >
                Weâ€™re a cooperative in Edinburgh working
              </p>
              <h3
              class="text-center dosis-semi-bold"
                style="font-size: 1.75em; line-height: 0.8;"
              >
                FOR A WORLD
              </h3>
              <h1
              class="text-center dosis-semi-bold"
                style="font-size: 2.5em; line-height: 0.8;"
              >
                WITHOUT
              </h1>
              <h3
              class="text-center dosis-semi-bold"
                style="font-size: 1.75em; line-height: 0.8;"
              >
                WASTE
              </h3>

              <br />

              <h3 id="carbonCounter" class="dosis-semi-bold"></h3>
            </center>

            {{ range (where .Data.Pages "Type" "working-groups") }}

            <div
              id="{{urlize .Title }}_info"
              class="working-group-synopsis d-none"
            >
              <div class="row pt-0 pl-4 mb-4">
                <div class="container">
                  <h1
                    class="dosis-bold"
                    style="font-size: 38px; padding-bottom: 0; color: {{.Params.colour}};"
                  >
                    {{ .Title }}
                  </h1>

                  <h4 class="text-white dosis-semi-bold">{{ .Params.tagline }}</h4>

                  <p class="mt-4 text-white">
                    Open {{ .Params.times }}
                  </p>
                  <p class="text-white">
                    {{ .Params.address }}
                  </p>

                </div>
              </div>
            </div>

            {{ end }}
          </div>
        </div>
        <div class="col-md-4 ml-0 mx-auto d-none d-md-block">
          <div class="container ml-2 mx-auto">
            {{ range (where .Data.Pages "Type" "working-groups") }}

            <div class="center-block mb-3">
              <a
                class="working_group_link"
                href="{{.Site.BaseURL}}{{.URL}}"
                title="{{ .Params.alt }}"
              >
                <img alt="{{ .Name }} logo"
                  src="{{ .Params.working_group_logo}}"
                  id="{{urlize .Title }}"
                  class="working_group_icon mx-auto"
                />

              </a>
            </div>

            {{ end }}
          </div>
        </div>
      </div>
    </div>
    <!--<div class="row"><img src="/images/map.png" class="map" /></div>-->
  </div>

  <div class="col-lg-4 order-lg-1 d-none d-lg-block">
    <div class="latest-blog-header sloped">
      <div class="container">
        {{ range first 1 (where .Data.Pages "Type" "news") }}
        <div class="pl-3 pt-4">
          <h1 class="dosis-bold text-white">{{ .Title }}</h1>

          <p class="dosis-semi-bold text-white">
            By {{ .Params.author }} | {{ dateFormat "02/01/06" .Date }}
          </p>

          <p class="text-white">{{ .Description }}</p>
          <p>
            <a
              href="{{.Site.BaseURL}}{{ .URL }}"
              title="Blog post: {{ .Title }} by {{.Params.author }} - click this link to continue reading."
              class="text-white underline"
              >Read full post</a
            >
          </p>
        </div>
        {{ end }}
      </div>
    </div>
  </div>

  <div class="col-lg-4 order-lg-3 d-none d-lg-block">
    <div class="events-header sloped">
      <div class="container">
        {{ range first 1 (where .Data.Pages "Type" "events") }}
        <div class="pl-4 pt-4">
          <h1 class="dosis-bold text-white">{{ .Title }}</h1>

          <p class="dosis-semi-bold text-white">
            {{ dateFormat "02/01/06 15:04" .Params.time }} @ {{ .Params.location }} | Hosted by {{ .Params.author }}
          </p>

          <p class="text-white">{{ .Description }}</p>

          <a
            href="{{.Site.BaseURL}}{{ .URL }}"
            title="Latest event: {{ .Title }} - click this link to read more about this event."
            class="text-white underline"
            >See details</a
          >
        </div>
        {{ end }}
      </div>
    </div>
  </div>
</div>

<br />

<script>

  $(".working_group_icon").mouseenter(function(){
    $("#default-header").hide();
    $(".working-group-synopsis").addClass("d-none");
    $(".working_group_icon").css("opacity", "0.5");
    $("#" + this.id).css("opacity", "1");
    $("#" + this.id + "_info").removeClass("d-none");
  })

  $(".working_group_icon").mouseleave(function(){
    $("#default-header").show();
    $("#" + this.id + "_info").addClass("d-none");
    $("#" + this.id + "_info").removeClass("d-none");
    $(".working-group-synopsis").addClass("d-none");
    $(".working_group_icon").css("opacity", "1");
  })

  /*$.ajax({
    url: "https://murakami.org.uk/api/get/reports/all-time/carbon-saved?key={{ .Site.Params.murakamiKey }}",
    type: "GET",
    success: function(res) {
      if (!parseFloat(res)) {
        res = (0.0).toFixed(3);
      }
      $("#carbonCounter").text(res + " tonnes of carbon saved this year!");
    }
  });*/

  $("#carbonCounter").text("1.234 tonnes of carbon saved this year!");
</script>

{{ end }}
